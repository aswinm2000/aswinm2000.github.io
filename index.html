<html>
	<head>
		<title>Testing Map Selection</title>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet/v0.7.7/leaflet.css" />
		<script src="https://d19vzq90twjlae.cloudfront.net/leaflet/v0.7.7/leaflet.js"></script>
		<style type="text/css">
		 	html, body, #map{
		 		height: 100%;
		 		padding: 0;
		 		margin: 0;
		 	}
		</style>
	</head>
	<body>
		<div id="map"></div>
		<script type="text/javascript">

			function main() {

				var options = {
					center: [40.420488, -3.705878],
					zoom: 6
				}

				var map = L.map('map', options);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19,attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})
				.addTo(map);

        var popup = L.popup();

        function onMapClick(e) {
          var coord = e.latlng.toString().split(',');
          var lat = coord[0].split('(');
          var lng = coord[1].split(')');
          L.marker([lat[1], lng[0]]).addTo(map);
          popup
          .setLatLng(e.latlng)
          .setContent("You clicked the map at " + e.latlng.toString())
          .openOn(map);

         }

         map.on('click', onMapClick);

				map.on('click',	function(e){
						var coord = e.latlng.toString().split(',');
						var lat = coord[0].split('(');
						var lng = coord[1].split(')');
            L.marker([lat[1], lng[0]]).addTo(map);
					});
			}
			window.onload = main;
		</script>
	</body>
</html>
